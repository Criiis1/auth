<!DOCTYPE html>
<html lang="es">

<head>
    <title>Dashboard</title>
</head>

<body>
    <h2>Bienvenido al Dashboard</h2>
    <button id="logout">Cerrar sesión</button>

    <!-- Importar Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>

    <script>
        // ✅ Configuración de Firebase (usa tus credenciales reales aquí)
        const firebaseConfig = {
              apiKey: "AIzaSyCDm5X0hjr3jJ4oSylQzbOMFDzCPCfskmU",
              authDomain: "authproject-9e9f7.firebaseapp.com",
              projectId: "authproject-9e9f7",
              storageBucket: "authproject-9e9f7.firebasestorage.app",
              messagingSenderId: "128126979764",
              appId: "1:128126979764:web:56dc0d7c12a87221ebd1e1",
              measurementId: "G-JCJZ4S6GCY"
        };

        // ✅ Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // ✅ Lógica para cerrar sesión
        const logoutBtn = document.getElementById('logout');

        logoutBtn.addEventListener('click', () => {
            auth.signOut().then(() => {
                window.location.href = 'index.html'; // Redirigir al login
            }).catch((error) => {
                console.error('Error al cerrar sesión:', error);
            });
        });

        // ✅ Cerrar sesión después de 30 segundos de inactividad
        let timeout;

        const resetTimer = () => {
            clearTimeout(timeout);
            timeout = setTimeout(() => {
                auth.signOut().then(() => {
                    window.location.href = 'index.html';
                });
            }, 30000); // 30 segundos
        };

        window.onload = resetTimer;
        document.onmousemove = resetTimer;
        document.onkeydown = resetTimer;

        // ✅ Verificar si el usuario está autenticado
        auth.onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = 'index.html'; // Si no está autenticado, lo manda al login
            }
        });
    </script>

</body>

</html>
